(a=>{function b(){this.imageContainerHeight=0,this.contentContainerHeight=0,this.headingHeight=0,this.numberOfAccordions=4,this.numberOfBoxesPerAccordion=3,this.accordionHeadings=['Heading 1','Heading 2','Heading 3','Heading 4'],this.divAccordionContainerClass='col-sm'}b.prototype={jaccordion:function(c={}){if('object'==typeof c){Number.isInteger(c.numberOfAccordions)&&(this.numberOfAccordions=c.numberOfAccordions),Number.isInteger(c.numberOfBoxesPerAccordion)&&(this.numberOfBoxesPerAccordion=c.numberOfBoxesPerAccordion),Array.isArray(c.accordionHeadings)&&c.accordionHeadings.length==this.numberOfAccordions&&(this.accordionHeadings=c.accordionHeadings),Array.isArray(c.data)&&c.data.length==this.numberOfAccordions&&(this.data=c.data),'undefined'!=typeof c.divAccordionContainerClass&&(this.divAccordionContainerClass=c.divAccordionContainerClass);for(let e=0;e<this.numberOfAccordions;e++){let f=a('<div>').addClass(this.divAccordionContainerClass),g=a('<div>').addClass('accordion').append(`<h2>${c.accordionHeadings[e]}</h2>`),h=a('<div>').addClass('accordion-content');for(let l,k=0;k<this.numberOfBoxesPerAccordion;k++)l=a('<div>').addClass(`box-${k+1}`).html(`
							<div class="image-container"><img src="${c.data[e][k].imagePath}" class="img-fluid" /></div>
              <div class="content"><strong>${c.data[e][k].heading}</strong>
                <p>${c.data[e][k].content}</p>
              </div>
						`).attr('style',`z-index: ${this.numberOfBoxesPerAccordion-k};`).appendTo(h),0===k&&l.addClass('current');g.append(h).appendTo(f),f.appendTo(this)}let d=a(this).find('.accordion-content');this.fromOffset=Array(this.numberOfBoxesPerAccordion-1),this.toOffset=Array(this.numberOfBoxesPerAccordion-1),setTimeout(()=>{this._getHeights(d),this._init(d),this._animate(d),a(window).resize(()=>this._reset(d))},100)}},_animate:function(c){a(c).each((d,e)=>{let f=e;a(f).children().mouseenter(g=>{let h=a(f).children().index(g.currentTarget),k=a(f).children().index(a(f).children('[class~="current"]'));if(!a(g.currentTarget).hasClass('current')){if(k>h)for(let l=k-1;l>=h;l--)a(a(f).children().get(l)).stop(!1,!1),toTop=`${this.toOffset[l]}px`,a(a(f).children().get(l)).animate({top:toTop});else if(k<h)for(let l=k;l<h;l++)a(a(f).children().get(l)).stop(!1,!1),toTop=`${this.fromOffset[l]}px`,a(a(f).children().get(l)).animate({top:toTop});a(f).children().removeClass('current'),a(g.currentTarget).addClass('current')}})})},_init:function(c){let d=0;a(c).children().each((e,f)=>{a(f).hasClass('box-1')&&(d=0),a(f).css('top',`${d}px`),d+=this.contentContainerHeight}),a(c).css('height',`${this.contentContainerHeight*this.numberOfBoxesPerAccordion+this.imageContainerHeight}px`).find('.content').css('height',`${this.contentContainerHeight}px`),a(c).prev().css('height',`${this.headingHeight}px`),a(c).children().each((e,f)=>{e==this.numberOfBoxesPerAccordion-1||(this.toOffset[e]=a(f).position().top,this.fromOffset[e]=a(f).position().top-a(f).children().outerHeight())})},_resetAccordion:function(c){a(c).css('height','').find('.content').css('height','').end().prev().css('height',''),a(c).children().removeClass('current').end().children('[class*="box-1"]').addClass('current')},_getHeights:function(c){a(c).each((d,e)=>{a(e).prev().outerHeight()>this.headingHeight&&(this.headingHeight=a(e).prev().outerHeight())}),a(c).find('.image-container').each((d,e)=>{a(e).outerHeight()>this.imageContainerHeight&&(this.imageContainerHeight=a(e).outerHeight())}),a(c).find('.content').each((d,e)=>{a(e).outerHeight()>this.contentContainerHeight&&(this.contentContainerHeight=a(e).outerHeight())})},_reset:function(c){this.contentContainerHeight=0,this.headingHeight=0,this.imageContainerHeight=0,this._resetAccordion(c),this._getHeights(c),this._init(c)}},a.fn.extend(new b)})(jQuery);
